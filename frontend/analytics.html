<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ - Online Banking</title>
    <link rel="stylesheet" href="/css/mobile-banking.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- –®–∞–ø–∫–∞ -->
    <header class="app-header">
        <button onclick="goBack()" class="back-btn">‚Üê</button>
        <h1 class="header-title">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h1>
        <button onclick="exportToJSON()" class="export-btn">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M10 12L6 8h8l-4 4z" fill="currentColor"/>
                <path d="M10 2v10M4 16h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
        </button>
    </header>

    <div class="app-container">
        <!-- –§–∏–ª—å—Ç—Ä –ø–µ—Ä–∏–æ–¥–∞ -->
        <div class="period-tabs">
            <button class="tab-btn" data-period="day">–î–µ–Ω—å</button>
            <button class="tab-btn" data-period="week">–ù–µ–¥–µ–ª—è</button>
            <button class="tab-btn active" data-period="month">–ú–µ—Å—è—Ü</button>
            <button class="tab-btn" data-period="year">–ì–æ–¥</button>
        </div>

        <!-- –û–±—â–∞—è —Å–≤–æ–¥–∫–∞ -->
        <div class="summary-card gradient-card">
            <div class="summary-header">
                <h2>–û–±—â–∏–π –±–∞–ª–∞–Ω—Å</h2>
                <span class="period-label" id="periodLabel">–¢–µ–∫—É—â–∏–π –º–µ—Å—è—Ü</span>
            </div>
            <div class="balance-amount" id="totalBalance">0 ‚ÇΩ</div>
            
            <div class="stats-grid">
                <div class="stat-item income">
                    <span class="stat-icon">‚Üë</span>
                    <div class="stat-content">
                        <span class="stat-label">–î–æ—Ö–æ–¥—ã</span>
                        <span class="stat-value" id="totalIncome">0 ‚ÇΩ</span>
                    </div>
                </div>
                <div class="stat-item expense">
                    <span class="stat-icon">‚Üì</span>
                    <div class="stat-content">
                        <span class="stat-label">–†–∞—Å—Ö–æ–¥—ã</span>
                        <span class="stat-value" id="totalExpense">0 ‚ÇΩ</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ì—Ä–∞—Ñ–∏–∫ -->
        <div class="chart-section">
            <h3 class="section-title">–î–∏–Ω–∞–º–∏–∫–∞ –ø–æ –º–µ—Å—è—Ü–∞–º</h3>
            <div class="chart-card">
                <canvas id="trendChart"></canvas>
            </div>
        </div>

        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
        <div class="categories-section">
            <div class="section-header">
                <h3 class="section-title">–†–∞—Å—Ö–æ–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h3>
                <button onclick="showAllCategories()" class="link-btn">–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ</button>
            </div>
            <div id="categoriesList" class="categories-list"></div>
        </div>

        <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ -->
        <div class="transactions-section">
            <div class="section-header">
                <h3 class="section-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</h3>
                <button onclick="showAllTransactions()" class="link-btn">–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ</button>
            </div>
            <div id="transactionsList" class="transactions-list"></div>
        </div>

        <!-- –ë—é–¥–∂–µ—Ç—ã -->
        <div class="budgets-section">
            <div class="section-header">
                <h3 class="section-title">–ë—é–¥–∂–µ—Ç—ã</h3>
                <button onclick="showBudgetModal()" class="add-btn">+ –î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
            <div id="budgetsList" class="budgets-list"></div>
        </div>

        <!-- –¶–µ–ª–∏ -->
        <div class="goals-section">
            <div class="section-header">
                <h3 class="section-title">–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ü–µ–ª–∏</h3>
                <button onclick="showGoalModal()" class="add-btn">+ –î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
            <div id="goalsList" class="goals-list"></div>
        </div>

        <div class="bottom-spacer"></div>
    </div>

    <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="bottom-nav">
        <a href="dashboard.html" class="nav-item">
            <span class="nav-icon">üè†</span>
            <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
        </a>
        <a href="cards.html" class="nav-item">
            <span class="nav-icon">üí≥</span>
            <span class="nav-label">–ö–∞—Ä—Ç—ã</span>
        </a>
        <a href="#" class="nav-item nav-circle active">
            <span class="nav-icon-circle">‚áÑ</span>
        </a>
        <a href="analytics.html" class="nav-item">
            <span class="nav-icon">üìÑ</span>
            <span class="nav-label">–ò—Å—Ç–æ—Ä–∏—è</span>
        </a>
        <a href="profile.html" class="nav-item">
            <span class="nav-icon">üë§</span>
            <span class="nav-label">–í—ã—Ö–æ–¥</span>
        </a>
    </nav>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –±—é–¥–∂–µ—Ç–∞ -->
    <div id="budgetModal" class="modal">
        <div class="modal-backdrop" onclick="closeBudgetModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>–ù–æ–≤—ã–π –±—é–¥–∂–µ—Ç</h2>
                <button onclick="closeBudgetModal()" class="modal-close">&times;</button>
            </div>
            <form id="budgetForm" class="modal-form">
                <div class="form-field">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                    <input type="text" id="budgetName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü—Ä–æ–¥—É–∫—Ç—ã" required>
                </div>
                <div class="form-field">
                    <label>–°—É–º–º–∞</label>
                    <input type="number" id="budgetAmount" placeholder="0" step="0.01" required>
                </div>
                <div class="form-field">
                    <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                    <select id="budgetCategory">
                        <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                    </select>
                </div>
                <div class="form-field">
                    <label>–ü–µ—Ä–∏–æ–¥</label>
                    <select id="budgetPeriod" required>
                        <option value="daily">–ï–∂–µ–¥–Ω–µ–≤–Ω–æ</option>
                        <option value="weekly">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ</option>
                        <option value="monthly" selected>–ï–∂–µ–º–µ—Å—è—á–Ω–æ</option>
                        <option value="yearly">–ï–∂–µ–≥–æ–¥–Ω–æ</option>
                    </select>
                </div>
                <div class="form-field">
                    <label>–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</label>
                    <input type="date" id="budgetStartDate" required>
                </div>
                <button type="submit" class="btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ü–µ–ª–∏ -->
    <div id="goalModal" class="modal">
        <div class="modal-backdrop" onclick="closeGoalModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>–ù–æ–≤–∞—è —Ü–µ–ª—å</h2>
                <button onclick="closeGoalModal()" class="modal-close">&times;</button>
            </div>
            <form id="goalForm" class="modal-form">
                <div class="form-field">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Ü–µ–ª–∏</label>
                    <input type="text" id="goalName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –û—Ç–ø—É—Å–∫" required>
                </div>
                <div class="form-field">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="goalDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ —Ü–µ–ª–∏" rows="3"></textarea>
                </div>
                <div class="form-field">
                    <label>–¶–µ–ª–µ–≤–∞—è —Å—É–º–º–∞</label>
                    <input type="number" id="goalAmount" placeholder="0" step="0.01" required>
                </div>
                <div class="form-field">
                    <label>–°—Ä–æ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</label>
                    <input type="date" id="goalDate">
                </div>
                <div class="form-field">
                    <label>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                    <select id="goalPriority">
                        <option value="low">–ù–∏–∑–∫–∏–π</option>
                        <option value="medium" selected>–°—Ä–µ–¥–Ω–∏–π</option>
                        <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                    </select>
                </div>
                <button type="submit" class="btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
            </form>
        </div>
    </div>

    <script src="/js/analytics-mobile.js"></script>
    <script src="/js/analytics-export.js"></script>
</body>
</html>
