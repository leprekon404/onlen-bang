<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ - Online Banking</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/analytics.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="bottom-nav">
        <a href="dashboard.html" class="nav-item">
            <span class="nav-icon">üè†</span>
            <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
        </a>
        <a href="cards.html" class="nav-item">
            <span class="nav-icon">üí≥</span>
            <span class="nav-label">–ö–∞—Ä—Ç—ã</span>
        </a>
        <a href="analytics.html" class="nav-item active">
            <span class="nav-icon">üìä</span>
            <span class="nav-label">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span>
        </a>
        <a href="transactions.html" class="nav-item">
            <span class="nav-icon">üìÑ</span>
            <span class="nav-label">–ò—Å—Ç–æ—Ä–∏—è</span>
        </a>
        <a href="profile.html" class="nav-item">
            <span class="nav-icon">üë§</span>
            <span class="nav-label">–í—ã—Ö–æ–¥</span>
        </a>
    </nav>

    <div class="analytics-container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="analytics-header">
            <h1>üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã</h1>
            <div class="header-controls">
                <select id="periodFilter" class="period-selector">
                    <option value="day">–°–µ–≥–æ–¥–Ω—è</option>
                    <option value="week">–≠—Ç–∞ –Ω–µ–¥–µ–ª—è</option>
                    <option value="month" selected>–¢–µ–∫—É—â–∏–π –º–µ—Å—è—Ü</option>
                    <option value="year">–¢–µ–∫—É—â–∏–π –≥–æ–¥</option>
                    <option value="all">–í—Å–µ –≤—Ä–µ–º—è</option>
                </select>
                <button onclick="exportToJSON()" class="export-btn">
                    <span>üì•</span> –≠–∫—Å–ø–æ—Ä—Ç JSON
                </button>
            </div>
        </div>

        <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ —Å–≤–æ–¥–∫–∏ -->
        <div class="summary-grid">
            <div class="summary-card">
                <div class="summary-icon balance">üí∞</div>
                <div class="summary-content">
                    <h3>–ë–∞–ª–∞–Ω—Å</h3>
                    <p class="value" id="totalBalance">0 ‚ÇΩ</p>
                </div>
            </div>
            
            <div class="summary-card">
                <div class="summary-icon income">üìà</div>
                <div class="summary-content">
                    <h3>–î–æ—Ö–æ–¥—ã</h3>
                    <p class="value" id="totalIncome">0 ‚ÇΩ</p>
                </div>
            </div>
            
            <div class="summary-card">
                <div class="summary-icon expense">üìâ</div>
                <div class="summary-content">
                    <h3>–†–∞—Å—Ö–æ–¥—ã</h3>
                    <p class="value" id="totalExpense">0 ‚ÇΩ</p>
                </div>
            </div>
            
            <div class="summary-card">
                <div class="summary-icon savings">üíé</div>
                <div class="summary-content">
                    <h3>–°–±–µ—Ä–µ–∂–µ–Ω–∏—è</h3>
                    <p class="value" id="netSavings">0 ‚ÇΩ</p>
                    <p class="subtitle" id="savingsRate">0%</p>
                </div>
            </div>
        </div>

        <!-- –ì—Ä–∞—Ñ–∏–∫–∏ -->
        <div class="charts-grid">
            <div class="chart-card">
                <h2>üìà –¢—Ä–µ–Ω–¥ –¥–æ—Ö–æ–¥–æ–≤ –∏ —Ä–∞—Å—Ö–æ–¥–æ–≤</h2>
                <div class="chart-wrapper">
                    <canvas id="trendChart"></canvas>
                </div>
            </div>
            
            <div class="chart-card">
                <h2>üß© –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤</h2>
                <div class="chart-wrapper">
                    <canvas id="pieChart"></canvas>
                </div>
            </div>
        </div>

        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
        <div class="categories-section">
            <h2>üìä –†–∞—Å—Ö–æ–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h2>
            <div id="categoriesList" class="category-list"></div>
        </div>

        <!-- –ë—é–¥–∂–µ—Ç—ã –∏ —Ü–µ–ª–∏ -->
        <div class="budgets-goals-grid">
            <div class="budget-card">
                <div class="section-header">
                    <h2>üéØ –ë—é–¥–∂–µ—Ç—ã</h2>
                    <button onclick="showBudgetModal()" class="add-btn">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>
                <div id="budgetsList"></div>
            </div>
            
            <div class="goals-card">
                <div class="section-header">
                    <h2>‚≠ê –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ü–µ–ª–∏</h2>
                    <button onclick="showGoalModal()" class="add-btn">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>
                <div id="goalsList"></div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –±—é–¥–∂–µ—Ç–∞ -->
    <div id="budgetModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–°–æ–∑–¥–∞—Ç—å –±—é–¥–∂–µ—Ç</h2>
                <button onclick="closeBudgetModal()" class="close-btn">&times;</button>
            </div>
            <form id="budgetForm" class="modal-form">
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                    <input type="text" id="budgetName" required>
                </div>
                <div class="form-group">
                    <label>–°—É–º–º–∞</label>
                    <input type="number" id="budgetAmount" step="0.01" required>
                </div>
                <div class="form-group">
                    <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                    <select id="budgetCategory">
                        <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–ü–µ—Ä–∏–æ–¥</label>
                    <select id="budgetPeriod" required>
                        <option value="daily">–ï–∂–µ–¥–Ω–µ–≤–Ω–æ</option>
                        <option value="weekly">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ</option>
                        <option value="monthly" selected>–ï–∂–µ–º–µ—Å—è—á–Ω–æ</option>
                        <option value="yearly">–ï–∂–µ–≥–æ–¥–Ω–æ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</label>
                    <input type="date" id="budgetStartDate" required>
                </div>
                <div class="form-group">
                    <label>–ü–æ—Ä–æ–≥ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (%)</label>
                    <input type="number" id="alertThreshold" min="0" max="100" value="80">
                </div>
                <div class="form-actions">
                    <button type="button" onclick="closeBudgetModal()" class="cancel-btn">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="submit-btn">–°–æ–∑–¥–∞—Ç—å</button>
                </div>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ü–µ–ª–∏ -->
    <div id="goalModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–î–æ–±–∞–≤–∏—Ç—å —Ü–µ–ª—å</h2>
                <button onclick="closeGoalModal()" class="close-btn">&times;</button>
            </div>
            <form id="goalForm" class="modal-form">
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Ü–µ–ª–∏</label>
                    <input type="text" id="goalName" required>
                </div>
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="goalDescription" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>–¶–µ–ª–µ–≤–∞—è —Å—É–º–º–∞</label>
                    <input type="number" id="goalAmount" step="0.01" required>
                </div>
                <div class="form-group">
                    <label>–°—Ä–æ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</label>
                    <input type="date" id="goalDate">
                </div>
                <div class="form-group">
                    <label>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                    <select id="goalPriority">
                        <option value="low">–ù–∏–∑–∫–∏–π</option>
                        <option value="medium" selected>–°—Ä–µ–¥–Ω–∏–π</option>
                        <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" onclick="closeGoalModal()" class="cancel-btn">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="submit-btn">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>
            </form>
        </div>
    </div>

    <script src="/js/analytics.js"></script>
</body>
</html>
