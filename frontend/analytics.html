<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ - Online Banking</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <header class="dashboard-header">
            <h1>üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã</h1>
            <div class="header-actions">
                <select id="periodFilter" class="period-filter">
                    <option value="month">–¢–µ–∫—É—â–∏–π –º–µ—Å—è—Ü</option>
                    <option value="week">–≠—Ç–∞ –Ω–µ–¥–µ–ª—è</option>
                    <option value="day">–°–µ–≥–æ–¥–Ω—è</option>
                    <option value="year">–¢–µ–∫—É—â–∏–π –≥–æ–¥</option>
                    <option value="all">–í—Å–µ –≤—Ä–µ–º—è</option>
                </select>
                <button onclick="location.href='dashboard.html'" class="btn-secondary">–ù–∞–∑–∞–¥</button>
                <button onclick="logout()" class="btn-logout">–í—ã–π—Ç–∏</button>
            </div>
        </header>

        <!-- –û–±—â–∞—è —Å–≤–æ–¥–∫–∞ -->
        <section class="summary-cards">
            <div class="card summary-card">
                <div class="card-icon balance">üí∞</div>
                <div class="card-content">
                    <div class="card-label">–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å</div>
                    <div class="card-value" id="totalBalance">0 ‚ÇΩ</div>
                </div>
            </div>
            
            <div class="card summary-card">
                <div class="card-icon income">üìà</div>
                <div class="card-content">
                    <div class="card-label">–î–æ—Ö–æ–¥—ã</div>
                    <div class="card-value" id="totalIncome">0 ‚ÇΩ</div>
                </div>
            </div>
            
            <div class="card summary-card">
                <div class="card-icon expense">üìâ</div>
                <div class="card-content">
                    <div class="card-label">–†–∞—Å—Ö–æ–¥—ã</div>
                    <div class="card-value" id="totalExpense">0 ‚ÇΩ</div>
                </div>
            </div>
            
            <div class="card summary-card">
                <div class="card-icon savings">üíé</div>
                <div class="card-content">
                    <div class="card-label">–ß–∏—Å—Ç—ã–µ —Å–±–µ—Ä–µ–∂–µ–Ω–∏—è</div>
                    <div class="card-value" id="netSavings">0 ‚ÇΩ</div>
                    <div class="card-subtitle" id="savingsRate">0%</div>
                </div>
            </div>
        </section>

        <!-- –ì—Ä–∞—Ñ–∏–∫–∏ -->
        <div class="charts-container">
            <div class="card chart-card">
                <h3>üìà –î–æ—Ö–æ–¥—ã –∏ —Ä–∞—Å—Ö–æ–¥—ã –ø–æ –º–µ—Å—è—Ü–∞–º</h3>
                <canvas id="incomExpenseTrendChart"></canvas>
            </div>
            
            <div class="card chart-card">
                <h3>üß© –†–∞—Å—Ö–æ–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h3>
                <canvas id="categoryPieChart"></canvas>
            </div>
        </div>

        <!-- –†–∞—Å—Ö–æ–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º —Å–ø–∏—Å–∫–æ–º -->
        <section class="card">
            <h3>üìä –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã</h3>
            <div id="categoryBreakdown" class="category-breakdown"></div>
        </section>

        <!-- –ë—é–¥–∂–µ—Ç—ã -->
        <section class="card">
            <div class="section-header">
                <h3>üéØ –ë—é–¥–∂–µ—Ç—ã</h3>
                <button onclick="showCreateBudgetModal()" class="btn-primary">–°–æ–∑–¥–∞—Ç—å –±—é–¥–∂–µ—Ç</button>
            </div>
            <div id="budgetsList" class="budgets-list"></div>
        </section>

        <!-- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ü–µ–ª–∏ -->
        <section class="card">
            <div class="section-header">
                <h3>‚≠ê –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ü–µ–ª–∏</h3>
                <button onclick="showCreateGoalModal()" class="btn-primary">–î–æ–±–∞–≤–∏—Ç—å —Ü–µ–ª—å</button>
            </div>
            <div id="goalsList" class="goals-list"></div>
        </section>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –±—é–¥–∂–µ—Ç–∞ -->
    <div id="budgetModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closeBudgetModal()">&times;</span>
            <h2>–°–æ–∑–¥–∞—Ç—å –±—é–¥–∂–µ—Ç</h2>
            <form id="budgetForm">
                <input type="text" id="budgetName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞" required>
                <input type="number" id="budgetAmount" placeholder="–°—É–º–º–∞" step="0.01" required>
                <select id="budgetCategory">
                    <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                </select>
                <select id="budgetPeriod" required>
                    <option value="daily">–ï–∂–µ–¥–Ω–µ–≤–Ω–æ</option>
                    <option value="weekly">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ</option>
                    <option value="monthly" selected>–ï–∂–µ–º–µ—Å—è—á–Ω–æ</option>
                    <option value="yearly">–ï–∂–µ–≥–æ–¥–Ω–æ</option>
                </select>
                <input type="date" id="budgetStartDate" required>
                <input type="number" id="alertThreshold" placeholder="–ü–æ—Ä–æ–≥ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (%)" min="0" max="100">
                <button type="submit" class="btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ü–µ–ª–∏ -->
    <div id="goalModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closeGoalModal()">&times;</span>
            <h2>–î–æ–±–∞–≤–∏—Ç—å —Ü–µ–ª—å</h2>
            <form id="goalForm">
                <input type="text" id="goalName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ü–µ–ª–∏" required>
                <textarea id="goalDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" rows="3"></textarea>
                <input type="number" id="goalAmount" placeholder="–¶–µ–ª–µ–≤–∞—è —Å—É–º–º–∞" step="0.01" required>
                <input type="date" id="goalDate" placeholder="–°—Ä–æ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è">
                <select id="goalPriority">
                    <option value="low">–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</option>
                    <option value="medium" selected>–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</option>
                    <option value="high">–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</option>
                </select>
                <button type="submit" class="btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
            </form>
        </div>
    </div>

    <script src="/js/analytics.js"></script>
</body>
</html>
